---
import LandingLayout from '@/layouts/LandingLayout.astro';
import IARetoHero from '@/components/pages/ia-contadores/IARetoHero.astro';
import IAProblemOpportunity from '@/components/pages/ia-contadores/IAProblemOpportunity.astro';
import IARetoDifferentiation from '@/components/pages/ia-contadores/IARetoDifferentiation.astro';
import IARetoSchedule from '@/components/pages/ia-contadores/IARetoSchedule.astro';
import IARetoTestimonials from '@/components/pages/ia-contadores/IARetoTestimonials.astro';
import IARetoIncludes from '@/components/pages/ia-contadores/IARetoIncludes.astro';
import IARetoAudience from '@/components/pages/ia-contadores/IARetoAudience.astro';
import IARetoPricing from '@/components/pages/ia-contadores/IARetoPricing.astro';
import IARetoFAQ from '@/components/pages/ia-contadores/IARetoFAQ.astro';
import IARetoInstructor from '@/components/pages/ia-contadores/IARetoInstructor.astro';
import IARetoFinalCTA from '@/components/pages/ia-contadores/IARetoFinalCTA.astro';
import IARetoMatrix from '@/components/pages/ia-contadores/IARetoMatrix.astro';
import IARetoSchema from '@/components/pages/ia-contadores/IARetoSchema.astro';

const title = 'Reto IA 12 Días - ChatGPT, Claude y Gemini 3 para Contadores';
const description =
  'Domina las 3 IAs más potentes en 12 días. Aprende cuál usar para cada tarea contable y genera ingresos extra.';
const keywords = [
  'IA para contadores',
  'ChatGPT',
  'Claude',
  'Gemini 3',
  'curso IA contabilidad',
  'automatización fiscal',
  'Reto IA 12 días',
];

// Configuration
const REGISTRATION_CHALLENGE_URL =
  'https://nas.io/checkout-global?communityId=67ab5a14d444670df4027cad&communityCode=TODOCONTA_CLUB&requestor=whatsappSignup&linkClicked=https%3A%2F%2Fnas.io%2Fportal%2Fchallenges%2Fmanage%3Fid%3D6932a1a7d7b7451ff09982cc&sourceInfoType=challenge&sourceInfoOrigin=6932a1a7d7b7451ff09982cc';
const EARLY_BIRD_PRICE = '$2,997';
const EARLY_BIRD_DEADLINE = '5 de enero 2026';

const INSTRUCTOR_NAME = 'Israel Castro';
---

<LandingLayout
  title={title}
  description={description}
  keywords={keywords}
  ogImage="https://s3.us-east-1.amazonaws.com/todoconta.com/uploads/images/reto_ia_contadores_todoconta_2026.jpeg"
  showFooter={false}
>
  <IARetoSchema
    registrationUrl={REGISTRATION_CHALLENGE_URL}
    price={EARLY_BIRD_PRICE}
    deadline={EARLY_BIRD_DEADLINE}
    instructorName={INSTRUCTOR_NAME}
  />

  <IARetoHero registrationUrl={REGISTRATION_CHALLENGE_URL} />
  <IAProblemOpportunity registrationUrl={REGISTRATION_CHALLENGE_URL} />

  <IARetoDifferentiation />

  <IARetoMatrix />

  <IARetoSchedule registrationUrl={REGISTRATION_CHALLENGE_URL} />

  <IARetoTestimonials />

  <IARetoIncludes registrationUrl={REGISTRATION_CHALLENGE_URL} />

  <IARetoInstructor name={INSTRUCTOR_NAME} />

  <IARetoAudience registrationUrl={REGISTRATION_CHALLENGE_URL} />

  <IARetoPricing
    registrationUrl={REGISTRATION_CHALLENGE_URL}
    price={EARLY_BIRD_PRICE}
    deadline={EARLY_BIRD_DEADLINE}
  />

  <IARetoFAQ registrationUrl={REGISTRATION_CHALLENGE_URL} />

  <IARetoFinalCTA
    registrationUrl={REGISTRATION_CHALLENGE_URL}
    deadline={EARLY_BIRD_DEADLINE}
  />
</LandingLayout>

<style is:global>
  /* ========================================
     ANIMATIONS & GLOBAL UTILITIES
     ======================================== */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeInLeft {
    from {
      opacity: 0;
      transform: translateX(-30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fadeInRight {
    from {
      opacity: 0;
      transform: translateX(30px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(50px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }

  @keyframes shine {
    from {
      left: -100%;
    }
    to {
      left: 100%;
    }
  }

  .animate-on-scroll {
    opacity: 0;
  }

  .animate-on-scroll.animated {
    animation-duration: 0.8s;
    animation-fill-mode: forwards;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animated[data-animation='fade-in-up'] {
    animation-name: fadeInUp;
  }
  .animated[data-animation='fade-in-down'] {
    animation-name: fadeInDown;
  }
  .animated[data-animation='fade-in'] {
    animation-name: fadeIn;
  }
  .animated[data-animation='fade-in-left'] {
    animation-name: fadeInLeft;
  }
  .animated[data-animation='fade-in-right'] {
    animation-name: fadeInRight;
  }
  .animated[data-animation='slide-in-left'] {
    animation-name: slideInLeft;
  }
  .animated[data-animation='slide-in-right'] {
    animation-name: slideInRight;
  }
  .animated[data-animation='scale-in'] {
    animation-name: scaleIn;
  }

  /* Delay utilities */
  .animated[data-delay='100'] {
    animation-delay: 100ms;
  }
  .animated[data-delay='200'] {
    animation-delay: 200ms;
  }
  .animated[data-delay='300'] {
    animation-delay: 300ms;
  }
  .animated[data-delay='400'] {
    animation-delay: 400ms;
  }
  .animated[data-delay='500'] {
    animation-delay: 500ms;
  }
</style>

<script>
  // @ts-nocheck
  /**
   * INTERSECTION OBSERVER - ANIMATIONS
   * Triggers animations when sections enter the viewport
   */
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px',
  };

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // We use the data-delay attribute to stagger animations
        const delay = entry.target.getAttribute('data-delay') || '0';
        setTimeout(() => {
          entry.target.classList.add('animated');
        }, parseInt(delay));
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.animate-on-scroll').forEach(el => {
    observer.observe(el);
  });

  /**
   * ANALYTICS TRACKING
   * Simple wrapper for multi-platform event tracking
   */
  function trackEvent(eventName, eventData = {}) {
    // GA4
    if (typeof window !== 'undefined' && 'gtag' in window) {
      window.gtag('event', eventName, eventData);
    }
    // Plausible
    if (typeof window !== 'undefined' && 'plausible' in window) {
      window.plausible(eventName, { props: eventData });
    }
  }

  // Track CTA clicks
  document.querySelectorAll('[data-track-event]').forEach(button => {
    button.addEventListener('click', e => {
      const target = e.currentTarget;
      const eventName = target?.getAttribute('data-track-event');
      if (eventName && target) {
        trackEvent(eventName, {
          button_text: target.textContent?.trim() || '',
        });
      }
    });
  });

  // Track FAQ interactions (Updated for <details> components)
  document.querySelectorAll('details').forEach(item => {
    item.addEventListener('toggle', () => {
      if (item.hasAttribute('open')) {
        const question = item.querySelector('h3')?.textContent?.trim();
        trackEvent('faq_opened', {
          question: question || 'unknown',
        });
      }
    });
  });

  // Track section visibility
  const sectionObserver = new IntersectionObserver(
    entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting && entry.target instanceof HTMLElement) {
          const sectionId = entry.target.id || 'unnamed_section';
          trackEvent('section_viewed', { section: sectionId });
          sectionObserver.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.5 }
  );

  document.querySelectorAll('section').forEach(section => {
    sectionObserver.observe(section);
  });
</script>
