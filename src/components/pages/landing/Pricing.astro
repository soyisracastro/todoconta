---
import PricingCard from '../../ui/PricingCard.astro';

export interface Props {
  title?: string | undefined;
  subtitle?: string | undefined;
  price: number;
  currency?: string | undefined;
  pricePeriod?: string | undefined;
  features: string[];
  ctaText?: string | undefined;
  ctaUrl: string;
  highlighted?: boolean | undefined;
}

const {
  title = 'Precio y Licencia',
  subtitle = 'Obt√©n acceso completo a todas las funcionalidades',
  price,
  currency = 'MXN',
  pricePeriod,
  features,
  ctaText = 'Comprar Ahora',
  ctaUrl,
  highlighted = false,
} = Astro.props;

// Formatear el precio
const formattedPrice = new Intl.NumberFormat('es-MX', {
  style: 'currency',
  currency: currency,
  maximumFractionDigits: 0,
})
  .format(price)
  .replace('$', '')
  .replace(',', ',');
---

<section class="pricing-section" id="pricing">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title animate-fade-in-up">{title}</h2>
      {
        subtitle && (
          <p class="section-subtitle animate-fade-in-up delay-100">
            {subtitle}
          </p>
        )
      }
    </div>

    <div class="pricing-wrapper animate-fade-in-up delay-200">
      <PricingCard
        title={title}
        price={formattedPrice}
        {...pricePeriod && { pricePeriod }}
        description={subtitle}
        features={features}
        featured={highlighted}
        ctaText={ctaText}
        ctaHref={ctaUrl}
      />
    </div>
  </div>
</section>

<style>
  .pricing-section {
    padding: var(--space-16) 0;
    text-align: center;
  }

  .pricing-wrapper {
    max-width: 500px;
    margin: 0 auto;
  }
</style>
